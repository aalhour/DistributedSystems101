<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Distributed Systems 101</title>
<meta name="author" content="(@lvh)"/>

<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>
<link rel="stylesheet" href="./reveal.js/css/theme/lvh.css" id="theme"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section>
<h1>Distributed Systems 101</h1>
<h2>@lvh</h2>
<h2><a href="mailto:_@lvh.io">_@lvh.io</a></h2>
<h2></h2>
</section>

<section>
<section id="sec-1" >

<h2>Introduction</h2>
</section>
<section id="sec-1-1" >

<h3>Who am I?</h3>
<img src="./media/lvh.svg" alt="lvh.svg" style="width:80%" />

</section>
<section id="sec-1-2" >

<h3>Rackspace</h3>
<img src="./media/rackspace.svg" alt="rackspace.svg" style="width:90%" />

</section>
<section id="sec-1-3" >

<h3>AutoScale</h3>
<img src="./media/threeotters.jpg" alt="threeotters.jpg" style="width:90%" />

</section>
<section id="sec-1-4" >

<h3>AutoScale</h3>
<ul class="org-ul">
<li class="fragment roll-in">Distributed system
</li>
<li class="fragment roll-in">Manages distributed systems
</li>
<li class="fragment roll-in">Running on distributed systems
</li>
<li class="fragment roll-in">Interacting with distributed systems
</li>
</ul>

</section>
<section id="sec-1-5" >

<h3>Why this talk?</h3>
<p>
Parallels with Crypto 101
</p>

<ul class="org-ul">
<li class="fragment roll-in">Field considered exclusive domain of experts
</li>
<li class="fragment roll-in">Abstinence-only education doesn't work
</li>
<li class="fragment roll-in">Lots of material, but not organized for self-teaching
</li>
<li class="fragment roll-in">We can't afford not to care
</li>
</ul>

</section>
<section id="sec-1-6" >

<h3>Disconnect</h3>
<ul class="org-ul">
<li>Many theoreticians ignore practice
</li>
<li>Many practitioners ignore theory
</li>
</ul>

</section>
<section id="sec-1-7" >

<h3>Distributed Systems 101</h3>
<p>
"Just enough" distributed systems
</p>

<ul class="org-ul">
<li class="fragment roll-in">to whet your appetite
</li>
<li class="fragment roll-in">to shoot yourself in the foot
</li>
</ul>
</section>

</section>
<section>
<section id="sec-2" >

<h2>Distributed systems and concurrency</h2>
</section>
<section id="sec-2-1" >

<h3>What <i>is</i> a distributed system?</h3>
<p>
A system is distributed if a machine I've never heard of can cause
my program to fail.
</p>

<p>
<i>Leslie Lamport</i>
</p>

</section>
<section id="sec-2-2" >

<h3>Paradox</h3>
<ul class="org-ul">
<li>Why do we use them? Reliability!
</li>
<li>Experts' primary concern? Failure!
</li>
</ul>

</section>
<section id="sec-2-3" >

<h3>Fundamental constraints</h3>
<ol class="org-ol">
<li>Information travels at <i>c</i>
</li>
<li>Components fail
</li>
</ol>

</section>
<section id="sec-2-4" >

<h3>Fallacies</h3>
<ol class="org-ol">
<li>The network is reliable.
</li>
<li>Latency is zero.
</li>
<li>Bandwidth is infinite.
</li>
<li>The network is secure.
</li>
<li>Topology doesn't change.
</li>
<li>There is one administrator.
</li>
<li>Transport cost is zero.
</li>
<li>The network is homogeneous.
</li>
</ol>

</section>
<section id="sec-2-5" >

<h3>Examples of distributed systems</h3>
<ul class="org-ul">
<li>Basically everything (e.g., your laptop)
<ul class="org-ul">
<li>Speed of light isn't infinite
</li>
<li>RAM is <i>all the way over there</i>
</li>
</ul>
</li>
<li>Typically:
<ul class="org-ul">
<li>Any system with &gt; 1 machine
</li>
<li>Connected via network
</li>
</ul>
</li>
</ul>
</section>

</section>
<section>
<section id="sec-3" >

<h2>Consequences</h2>
</section>
<section id="sec-3-1" >

<h3>Concurrency</h3>
</section>
<section id="sec-3-1-1" >

<h4>One process, one register</h4>
<img src="./media/SimpleRegister.svg" alt="SimpleRegister.svg" style="width:70%" />

</section>
<section id="sec-3-1-2" >

<h4>Two processes, one register</h4>
<img src="./media/SimpleRegisterTwoWriters.svg" alt="SimpleRegisterTwoWriters.svg" />

</section>
<section id="sec-3-1-3" >

<h4>Information travels at <i>c</i></h4>
<img src="./media/SlowRegisters.svg" alt="SlowRegisters.svg" style="width:50%" />

</section>
<section id="sec-3-1-4" >

<h4>Concurrency</h4>
<p>
Overlapping operations
</p>

</section>
<section id="sec-3-2" >

<h3>Consistency models</h3>
<img src="./media/ConsistencyModels.svg" alt="ConsistencyModels.svg" style="width:80%" />

<aside class="notes">
<p>
<a href="http://www.bailis.org/papers/hat-vldb2014.pdf">http://www.bailis.org/papers/hat-vldb2014.pdf</a>
<a href="http://www.ics.forth.gr/tech-reports/2013/2013.TR439_Survey_on_Consistency_Conditions.pdf">http://www.ics.forth.gr/tech-reports/2013/2013.TR439_Survey_on_Consistency_Conditions.pdf</a>
<a href="http://www.allthingsdistributed.com/2008/12/eventually_consistent.html">http://www.allthingsdistributed.com/2008/12/eventually_consistent.html</a>
</p>
</aside>

</section>
<section id="sec-3-2-1" >

<h4>Serializability</h4>
<ul class="org-ul">
<li>âˆƒ serial execution of transactions with the same result
</li>
<li><i>Some</i> serial execution: fairly weak
</li>
<li>No restrictions on <i>which</i> serial execution
</li>
<li>No restrictions on <i>when</i> they execute
</li>
</ul>

</section>
<section id="sec-3-2-2" >

<h4>Linearizability</h4>
<p>
All operations appear to happen instantly
</p>

</section>
<section id="sec-3-2-3" >

<h4>Strong serializability</h4>
<ul class="org-ul">
<li>Linearizable &amp; serializable
</li>
<li>There is a serial execution &#x2026; ()
</li>
</ul>

</section>
<section id="sec-3-2-4" >

<h4>Your computer is distributed</h4>
<ul class="org-ul">
<li>Models also exist in "centralized" systems
</li>
<li>SQL databases support many of these models
</li>
<li>Clojure's reference types
</li>
</ul>

</section>
<section id="sec-3-2-5" >

<h4>In Python: Twisted, asyncyio&#x2026; vs threads</h4>
<ul class="org-ul">
<li>Twisted: strongly serializable
<ul class="org-ul">
<li>Event loop with 1 reactor thread
</li>
<li>Serializable: reactor finds the ordering
</li>
<li>Linearizable: callbacks run by themselves
</li>
</ul>
</li>
<li>Threads: usually more like read uncommitted
<ul class="org-ul">
<li>Many Python opcodes are atomic
</li>
<li>Correct use of locks?
</li>
</ul>
</li>
</ul>

</section>
<section id="sec-3-3" >

<h3>CAP</h3>
</section>
<section id="sec-3-3-1" >

<h4>Pick any two:</h4>
<ul class="org-ul">
<li>Consistency
</li>
<li>Availability
</li>
<li>Partition tolerance
</li>
</ul>

</section>
<section id="sec-3-3-2" >

<h4>What does that even mean?</h4>
<ul class="org-ul">
<li>Availability, n.: all active nodes answer every query
</li>
<li>Consistency:, n.: linearizability
</li>
<li>Partition tolerance, p.: failure-resistant
</li>
</ul>

</section>
<section id="sec-3-3-3" >

<h4>Pick any two</h4>
<img src="./media/cap-venn-base.svg" alt="cap-venn-base.svg" style="width:50%" />

</section>
<section id="sec-3-3-4" >

<h4>Pick any two</h4>
<img src="./media/cap-venn-any2.svg" alt="cap-venn-any2.svg" style="width:50%" />

</section>
<section id="sec-3-3-5" >

<h4>Can't sacrifice partition tolerance</h4>
<ul class="org-ul">
<li>Partition tolerance is failure tolerance
</li>
<li>Networks, nodes fail all the time
</li>
<li>Latency happens; indistinguishable
</li>
<li>P(no failures) &lt; 1 - P(one node works)<sup>N</sup>
<ul class="org-ul">
<li>Cascades, Hurst exponent
</li>
</ul>
</li>
</ul>

</section>
<section id="sec-3-3-6" >

<h4>Pick any two: AP or CP</h4>
<img src="./media/cap-venn-any2-withp.svg" alt="cap-venn-any2-withp.svg" style="width:50%" />

</section>
<section id="sec-3-3-7" >

<h4>Examples</h4>
<ul class="org-ul">
<li>Zookeeper is CP: consistent ops that sometimes fail
</li>
<li>Cassandra is AP: inconsistent ops that (usually) succeed
</li>
</ul>

</section>
<section id="sec-3-3-8" >

<h4>Reality</h4>
<ul class="org-ul">
<li>CAP's C is linearizability
</li>
<li>CAP's A is ops on <i>any</i> node
</li>
<li>These are very strong guarantees!
</li>
</ul>

</section>
<section id="sec-3-3-9" >

<h4>Gradations</h4>
<img src="./media/ap-cp.svg" alt="ap-cp.svg" style="width:80%" />

</section>
<section id="sec-3-3-10" >

<h4>Reality</h4>
<ul class="org-ul">
<li>There are <i>many</i> consistency models (real &amp; theoretical)
</li>
<li>There are <i>many</i> levels of availability (0-100%)
</li>
<li>No reason to sacrifice either outside of failures
</li>
<li>Systems can sacrifice many things during failures
</li>
</ul>

</section>
<section id="sec-3-3-11" >

<h4>Example of creative sacrifice: <code>etcd</code></h4>
<ul class="org-ul">
<li>Normally: consistency all the way
</li>
<li>Option of doing inconsistent reads
</li>
<li>Maybe get some stale data
</li>
<li>&#x2026; but still works if the cluster is on fire!
</li>
</ul>
</section>


</section>
<section>
<section id="sec-4" >

<h2>Impossibility results</h2>
</section>
<section id="sec-4-1" >

<h3>FLP</h3>

</section>
<section id="sec-4-2" >

<h3>Wallclocks</h3>
</section>


</section>
<section>
<section id="sec-5" >

<h2>Tools and components</h2>
<p>
(High and low level)
</p>

</section>
<section id="sec-5-1" >

<h3>Queues</h3>

</section>
<section id="sec-5-2" >

<h3>Consensus protocols</h3>

</section>
<section id="sec-5-3" >

<h3>Examples</h3>
<ul class="org-ul">
<li>ZAB (used in Zookeeper)
</li>
<li>Paxos (think 2PC, but distributed)
</li>
<li>Raft (used in <code>etcd</code>)
</li>
</ul>

</section>
<section id="sec-5-4" >

<h3>Consensus protocol recipes</h3>
<ul class="org-ul">
<li>Set partitioning
</li>
<li>Consistent counters
</li>
<li>&#x2026;
</li>
</ul>

</section>
<section id="sec-5-5" >

<h3>CRDTs</h3>

</section>
<section id="sec-5-6" >

<h3>Previously: CAP</h3>
<ul class="org-ul">
<li>Presented as trade-off: C versus A
</li>
<li>Doesn't explain what we can do <i>on</i> that line
</li>
<li>CRDTs: wonderful modern example of what we can do
</li>
</ul>
</section>

</section>
<section>
<section id="sec-6" >

<h2>Wrap-up</h2>
</section>
<section id="sec-6-1" >

<h3>Yay, distributed systems!</h3>
<ul class="org-ul">
<li>More resilient
</li>
<li>More performant
</li>
<li>Make problems tractable
</li>
</ul>

</section>
<section id="sec-6-2" >

<h3>Argh, distributed systems!</h3>
<ul class="org-ul">
<li>Incredibly hard to reason about
</li>
<li>Huge state space, no repeat scenarios
</li>
<li>Expensive to operate
</li>
</ul>

</section>
<section id="sec-6-3" >

<h3>Why distributed systems?</h3>
<p>
Because you're <i>out of options</i>.
</p>

</section>
<section id="sec-6-4" >

<h3>Questions?</h3>
</section>
</section>
</div>
</div>

<script src="./reveal.js/lib/js/head.min.js"></script>
<script src="./reveal.js/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: true,
rollingLinks: false,
keyboard: true,
overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: './reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: './reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
]
});
</script>
</body>
</html>
